/*
 *  jquery-bestcomplete - v1.0.4
 *  
 *  https://github.com/potreco/jquery-bestcomplete#readme
 *
 *  Made by Patrick Jean Meurer
 *  Under MIT License
 */

!function($){"use strict";var e={minLength:1,autoFocus:!0,focusNext:!0,source:null,sourceData:null,addNew:!1,addNewData:null,headers:null,dataType:"json",language:{add:"Add",sourceError:"Source not defined. Please define a source, can be a Array, String or Function.",addNewURLError:"URL to add a new entry not found",addNewProblem:"Someting goes wrong with you add new URL."}},t={destroy:function(){return $(this).autocomplete("destroy"),this},init:function(c){return c=$.extend($.extend({},e),c),this.each(function(){var t=$(this),s=$(this).closest(".autocomplete");function u(){switch(typeof c.source){case"object":c.source.push(t.val());break;default:c.addNewData=$.extend({},c.addNewData,{text:t.val()}),$.ajax({type:"POST",url:c.addNew,data:c.addNewData,dataType:c.dataType,headers:c.headers,success:function(e){s.find(".addNew").attr("hidden","hidden"),s.find(".icon-success").css("opacity","1"),setTimeout(function(){s.find(".icon-success").css("opacity","0")},2e3),s.find("[class*='id']").val(e.id)},error:function(e,t,a){return alert("jQuery bestComplete: "+c.language.addNewProblem),$.error("jQuery bestComplete: "+c.language.addNewProblem),!1}})}a()}function a(){if(c.focusNext){var e=$("body").find("input:visible");e.eq(e.index(t)+1).focus()}}!function(){if(!c.source)return alert("jQuery bestComplete: "+c.language.sourceError),$.error("jQuery bestComplete: "+c.language.sourceError);!function(){if(c.addNew){var e=typeof c.source,t=typeof c.addNew;if("object"!==e&&"string"!==t)return alert("jQuery bestComplete: "+c.language.addNewURLError),$.error("jQuery bestComplete: "+c.language.addNewURLError);a=s,n=$('<div class="addNew labelComplete-field" hidden></div>'),o=$('<span class="text-add">'+c.language.add+"</span>"),d=$('<span class="text-complete"></span>'),r=$('<i class="fa fa-check icon-success"></i>'),i=$('<button type="button" class="btn-add"><i class="fa fa-plus fa-lg"></i></button>').bind("click.autoComplete",u),n.append(o).append(d).append(d).append(i),a.append(n).append(r)}var a,n,o,d,r,i}()}(),t.autocomplete({source:c.source,minLength:c.minLength,autoFocus:c.autoFocus}),t.unbind(".autoComplete"),t.bind("autocompleteresponse.autoComplete",function(e,t){$(this).css("background",""),0===t.content.length?(s.find(".addNew").removeAttr("hidden"),s.find(".addNew .text-complete").text($(this).val())):s.find(".addNew").attr("hidden","hidden")}),t.bind("autocompletesearch.autoComplete",function(e,t){$(this).css("background","url(https://jqueryui.com/resources/demos/autocomplete/images/ui-anim_basic_16x16.gif) right center no-repeat")}),t.bind("autocompleteselect.autoComplete",function(e,t){s.find("[class*='id']").val(t.item.id),a()}),t.bind("keydown.autoComplete",function(e){var t=s.find(".addNew"),a=e.keyCode||e.which;t.length&&(9==a&&"hidden"!==t.attr("hidden")&&(e.preventDefault(),u()),s.find(".addNew").attr("hidden","hidden"))}),t.bind("click.autoComplete",function(){t.val().length>c.minLength&&t.trigger("keydown")})})}};$.fn.bestComplete=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.bestComplete"):t.init.apply(this,arguments)}}(window.jQuery);